!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vega-util")):"function"==typeof define&&define.amd?define(["exports","vega-util"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).vegaTooltip={},t.vega)}(this,(function(t,e){"use strict";var n="0.33.0";function i(t,n,i){if(e.isArray(t))return`[${t.map((t=>n(e.isString(t)?t:l(t,i)))).join(", ")}]`;if(e.isObject(t)){let o="";const{title:s,image:r,...d}=t;s&&(o+=`<h2>${n(s)}</h2>`),r&&(o+=`<img src="${n(r)}">`);const a=Object.keys(d);if(a.length>0){o+="<table>";for(const t of a){let s=d[t];void 0!==s&&(e.isObject(s)&&(s=l(s,i)),o+=`<tr><td class="key">${n(t)}</td><td class="value">${n(s)}</td></tr>`)}o+="</table>"}return o||"{}"}return n(t)}function o(t){const e=[];return function(n,i){if("object"!=typeof i||null===i)return i;const o=e.indexOf(this)+1;return e.length=o,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function l(t,e){return JSON.stringify(t,o(e))}var s="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n";const r="vg-tooltip-element",d={offsetX:10,offsetY:10,id:r,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:a,maxDepth:2,formatTooltip:i};function a(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function p(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return s.toString().replace(r,t)}function h(t,e,n,i){let o=t.clientX+n;o+e.width>window.innerWidth&&(o=+t.clientX-n-e.width);let l=t.clientY+i;return l+e.height>window.innerHeight&&(l=+t.clientY-i-e.height),{x:o,y:l}}class c{constructor(t){this.options={...d,...t};const e=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=p(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}}tooltipHandler(t,e,n,i){if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");(document.fullscreenElement??document.body).appendChild(this.el)}if(null==i||""===i)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:l}=h(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${l}px`,this.el.style.left=`${o}px`}}const f=n;t.DEFAULT_OPTIONS=d,t.Handler=c,t.calculatePosition=h,t.createDefaultStyle=p,t.default=function(t,e){const n=new c(e);return t.tooltip(n.call).run(),n},t.escapeHTML=a,t.formatValue=i,t.replacer=o,t.stringify=l,t.version=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vega-tooltip.min.js.map
